import{d as p}from"./Spinner.svelte_svelte_type_style_lang.wWhsP2Sr.js";import{w as m}from"./paths.kHDvQc0-.js";import{O as d}from"./scheduler.yhBzS9E6.js";function g(c,b){let n=()=>{},s=[],t=0;const{subscribe:o,set:i}=m(void 0,()=>()=>n()),l=p(u=>{n=c.subscribe(u,{onData(e){t=e.id,!(!e.results.length&&e.progress<1)&&(s[e.page]=e.results,i(Object.assign(s.flat(),{detail:e.detail})))},onError(e){console.error(e)}}).unsubscribe});function a(u){d({subscribe:o})&&i(void 0),s=[],n(),u&&l(u)}return{subscribe:o,update:a,next:()=>b.mutate(t)}}function j(c,b,n){let s=()=>{},t=null,o=null;const i=Object.fromEntries(Object.entries(c).map(([r,f])=>[r,g(f,b)])),{subscribe:l,set:a}=m({type:n,data:void 0},()=>()=>s());function u(r){t?.update(r),o=r}function e(r){s(),t=i[r],s=t?.subscribe(f=>a({type:r,data:f}))||(()=>{}),o&&t.update(o)}return e(n),{subscribe:l,update:u,choose:e,next:()=>t?.next()}}export{j as m,g as s};

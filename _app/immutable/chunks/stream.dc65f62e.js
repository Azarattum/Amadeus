import{d as p}from"./Spinner.svelte_svelte_type_style_lang.44f1e953.js";import{w as m}from"./paths.a52d509b.js";import{O as d}from"./scheduler.c5d52407.js";function g(b,l){let r=()=>{},t=[],e=0;const{subscribe:i,set:u}=m(void 0,()=>()=>r()),c=p(n=>{r=b.subscribe(n,{onData(s){e=s.id,!(!s.results.length&&s.progress<1)&&(t[s.page]=s.results,u(Object.assign(t.flat(),{detail:s.detail})))},onError(s){console.error(s)}}).unsubscribe});function a(n){d({subscribe:i})&&u(void 0),t=[],r(),n&&c(n)}return{subscribe:i,update:a,next:()=>l.mutate(e)}}function j(b,l,r){let t=()=>{},e=null,i=null;const u=Object.fromEntries(Object.entries(b).map(([o,f])=>[o,g(f,l)])),{subscribe:c,set:a}=m({type:r,data:void 0},()=>()=>t());function n(o){e==null||e.update(o),i=o}function s(o){t(),e=u[o],t=(e==null?void 0:e.subscribe(f=>a({type:o,data:f})))||(()=>{}),i&&e.update(i)}return s(r),{subscribe:c,update:n,choose:s,next:()=>e==null?void 0:e.next()}}export{j as m,g as s};

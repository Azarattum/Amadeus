import{s as N,w as J,f as w,l as K,a as Q,g as y,h as I,m as W,d as _,c as Y,j as $,E as v,i as b,u as C,C as Z,n as q,x,y as ee,z as te,o as le,p as ne,e as E,G as se,X as ie,a1 as V,k as A,I as ae}from"./scheduler.yhBzS9E6.js";import{S as M,i as P,a as g,t as p,g as R,c as X,b as S,d as T,m as z,e as D}from"./index.f7836kWu.js";import{a as oe,g as re,I as fe}from"./Spinner.svelte_svelte_type_style_lang.K61WV_WN.js";import{I as F,e as B}from"./Track.83q2OSVE.js";import"./paths.VurOhmct.js";function ue(s){let t,n,e,l,o,i,a,f,d;const c=s[5].default,h=J(c,s,s[4],null);return{c(){t=w("aside"),n=w("button"),e=w("h2"),l=K(s[1]),o=Q(),i=w("div"),h&&h.c(),this.h()},l(u){t=y(u,"ASIDE",{class:!0});var r=I(t);n=y(r,"BUTTON",{tabindex:!0,class:!0});var m=I(n);e=y(m,"H2",{});var k=I(e);l=W(k,s[1]),k.forEach(_),m.forEach(_),r.forEach(_),o=Y(u),i=y(u,"DIV",{class:!0});var U=I(i);h&&h.l(U),U.forEach(_),this.h()},h(){$(n,"tabindex","-1"),$(n,"class","fixed z-50 flex h-11 w-full origin-top scale-y-0 transform-gpu touch-manipulation select-none items-center justify-center border-b border-highlight bg-gradient-to-t from-surface/70 to-surface font-semibold opacity-0 backdrop-blur-md transition-composite will-change-transform sm:bg-inherit svelte-1vqfn9j"),v(n,"scale-y-100",s[0]),v(n,"opacity-100",s[0]),$(t,"class","absolute left-0 top-0"),$(i,"class","transition-composite"),v(i,"opacity-0",s[0])},m(u,r){b(u,t,r),C(t,n),C(n,e),C(e,l),b(u,o,r),b(u,i,r),h&&h.m(i,null),s[6](i),a=!0,f||(d=Z(n,"click",s[3]),f=!0)},p(u,[r]){(!a||r&2)&&q(l,u[1]),(!a||r&1)&&v(n,"scale-y-100",u[0]),(!a||r&1)&&v(n,"opacity-100",u[0]),h&&h.p&&(!a||r&16)&&x(h,c,u,u[4],a?te(c,u[4],r,null):ee(u[4]),null),(!a||r&1)&&v(i,"opacity-0",u[0])},i(u){a||(g(h,u),a=!0)},o(u){p(h,u),a=!1},d(u){u&&(_(t),_(o),_(i)),h&&h.d(u),s[6](null),f=!1,d()}}}function ce(s,t,n){let{$$slots:e={},$$scope:l}=t,{stuck:o=!1}=t,{title:i=""}=t,a;const f=()=>a.scrollIntoView({behavior:"smooth"});le(()=>{const c=new IntersectionObserver(([h])=>n(0,o=h.intersectionRatio<.8),{root:oe(a),threshold:.8});return c.observe(a),()=>c.disconnect()});function d(c){ne[c?"unshift":"push"](()=>{a=c,n(2,a)})}return s.$$set=c=>{"stuck"in c&&n(0,o=c.stuck),"title"in c&&n(1,i=c.title),"$$scope"in c&&n(4,l=c.$$scope)},[o,i,a,f,l,e,d]}class ye extends M{constructor(t){super(),P(this,t,ce,ue,N,{stuck:0,title:1})}}function O(s,t,n){const e=s.slice();return e[3]=t[n].album.arts,e[4]=t[n].album.thumbnails,e}function he(s){let t,n;return t=new F({props:{size:L,src:s[0]?s[0].arts?.[0]||"":void 0,thumbnail:s[0]?s[0].thumbnails?.[0]||"":void 0,$$slots:{default:[me]},$$scope:{ctx:s}}}),{c(){S(t.$$.fragment)},l(e){T(t.$$.fragment,e)},m(e,l){z(t,e,l),n=!0},p(e,l){const o={};l&1&&(o.src=e[0]?e[0].arts?.[0]||"":void 0),l&1&&(o.thumbnail=e[0]?e[0].thumbnails?.[0]||"":void 0),l&129&&(o.$$scope={dirty:l,ctx:e}),t.$set(o)},i(e){n||(g(t.$$.fragment,e),n=!0)},o(e){p(t.$$.fragment,e),n=!1},d(e){D(t,e)}}}function de(s){let t,n,e=B(s[0].collection.tracks.filter(H).slice(0,4)),l=[];for(let i=0;i<e.length;i+=1)l[i]=G(O(s,e,i));const o=i=>p(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();t=E()},l(i){for(let a=0;a<l.length;a+=1)l[a].l(i);t=E()},m(i,a){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(i,a);b(i,t,a),n=!0},p(i,a){if(a&1){e=B(i[0].collection.tracks.filter(H).slice(0,4));let f;for(f=0;f<e.length;f+=1){const d=O(i,e,f);l[f]?(l[f].p(d,a),g(l[f],1)):(l[f]=G(d),l[f].c(),g(l[f],1),l[f].m(t.parentNode,t))}for(R(),f=e.length;f<l.length;f+=1)o(f);X()}},i(i){if(!n){for(let a=0;a<e.length;a+=1)g(l[a]);n=!0}},o(i){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)p(l[a]);n=!1},d(i){i&&_(t),ae(l,i)}}}function me(s){let t,n,e=`hue-rotate(${s[0]?.id||0}deg)`,l;return n=new fe({props:{name:s[0]&&"year"in s[0]?"disk":"person",xl:!0}}),{c(){t=w("div"),S(n.$$.fragment),this.h()},l(o){t=y(o,"DIV",{class:!0});var i=I(t);T(n.$$.fragment,i),i.forEach(_),this.h()},h(){$(t,"class","flex h-full w-full items-center justify-center bg-gradient-to-r from-rose-400 to-red-400 text-white"),A(t,"filter",e)},m(o,i){b(o,t,i),z(n,t,null),l=!0},p(o,i){const a={};i&1&&(a.name=o[0]&&"year"in o[0]?"disk":"person"),n.$set(a),i&1&&e!==(e=`hue-rotate(${o[0]?.id||0}deg)`)&&A(t,"filter",e)},i(o){l||(g(n.$$.fragment,o),l=!0)},o(o){p(n.$$.fragment,o),l=!1},d(o){o&&_(t),D(n)}}}function G(s){let t,n;return t=new F({props:{src:s[3]?.[0]||"",thumbnail:s[4]?.[0]||""}}),{c(){S(t.$$.fragment)},l(e){T(t.$$.fragment,e)},m(e,l){z(t,e,l),n=!0},p(e,l){const o={};l&1&&(o.src=e[3]?.[0]||""),l&1&&(o.thumbnail=e[4]?.[0]||""),t.$set(o)},i(e){n||(g(t.$$.fragment,e),n=!0)},o(e){p(t.$$.fragment,e),n=!1},d(e){D(t,e)}}}function j(s){let t,n,e,l,o=`${L}px`,i=`${L}px`,a;const f=[de,he],d=[];function c(r,m){return r[0]?.collection&&!r[0].arts?0:1}n=c(s),e=d[n]=f[n](s);let h=[{href:s[2]},{class:l="grid shrink-0 grid-cols-2 gap-2 overflow-hidden shadow-lg contain-paint "+(s[1]?"rounded-full":"rounded-2xl")+" "+(s[2]?"outline outline-0 outline-highlight transition-[outline_transform] active:scale-95 hover:outline-8":"")}],u={};for(let r=0;r<h.length;r+=1)u=ie(u,h[r]);return{c(){t=w(s[2]?"a":"div"),e.c(),this.h()},l(r){t=y(r,((s[2]?"a":"div")||"null").toUpperCase(),{href:!0,class:!0});var m=I(t);e.l(m),m.forEach(_),this.h()},h(){V(s[2]?"a":"div")(t,u),v(t,"bg-highlight",Array.isArray(s[0])&&!s[0].length),A(t,"width",o),A(t,"height",i)},m(r,m){b(r,t,m),d[n].m(t,null),a=!0},p(r,m){let k=n;n=c(r),n===k?d[n].p(r,m):(R(),p(d[k],1,1,()=>{d[k]=null}),X(),e=d[n],e?e.p(r,m):(e=d[n]=f[n](r),e.c()),g(e,1),e.m(t,null)),V(r[2]?"a":"div")(t,u=re(h,[(!a||m&4)&&{href:r[2]},(!a||m&6&&l!==(l="grid shrink-0 grid-cols-2 gap-2 overflow-hidden shadow-lg contain-paint "+(r[1]?"rounded-full":"rounded-2xl")+" "+(r[2]?"outline outline-0 outline-highlight transition-[outline_transform] active:scale-95 hover:outline-8":"")))&&{class:l}])),v(t,"bg-highlight",Array.isArray(r[0])&&!r[0].length)},i(r){a||(g(e),a=!0)},o(r){p(e),a=!1},d(r){r&&_(t),d[n].d()}}}function _e(s){let t=s[2]?"a":"div",n,e=(s[2]?"a":"div")&&j(s);return{c(){e&&e.c(),n=E()},l(l){e&&e.l(l),n=E()},m(l,o){e&&e.m(l,o),b(l,n,o)},p(l,[o]){l[2],t?N(t,l[2]?"a":"div")?(e.d(1),e=j(l),t=l[2]?"a":"div",e.c(),e.m(n.parentNode,n)):e.p(l,o):(e=j(l),t=l[2]?"a":"div",e.c(),e.m(n.parentNode,n))},i:se,o(l){p(e,l)},d(l){l&&_(n),e&&e.d(l)}}}const L=104,H=s=>s.album.arts?.length;function ge(s,t,n){let{of:e=void 0}=t,{round:l=!1}=t,{href:o=void 0}=t;return s.$$set=i=>{"of"in i&&n(0,e=i.of),"round"in i&&n(1,l=i.round),"href"in i&&n(2,o=i.href)},[e,l,o]}class Ie extends M{constructor(t){super(),P(this,t,ge,_e,N,{of:0,round:1,href:2})}}function $e(s){return s=s.toLowerCase(),t=>s?t?!!t.title?.toLowerCase().includes(s)||!!t.artists?.find(n=>n.title?.toLowerCase().includes(s))||!!t.album?.title?.toLowerCase().includes(s):!1:!0}export{Ie as A,ye as T,$e as m};

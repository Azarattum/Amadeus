import{s as X,v as Y,p as Z,a as T,c as v,i as m,K as x,d as _,M as C,w as F,x as G,y as J,z as O,l as z,m as N,n as q,e as y}from"./scheduler.yhBzS9E6.js";import{S as ee,i as te,b as p,d as g,m as d,a as c,t as $,e as k,f as le,g as H,c as I}from"./index.f7836kWu.js";import{S as h,H as ne,I as j}from"./Spinner.svelte_svelte_type_style_lang.pIzZn7_3.js";import{S as se}from"./Spacer.tcMPZ3eG.js";import"./paths.nY5dtFVt.js";import{s as fe,c as re,n as A,q as L}from"./Track.w2xpoFZd.js";import{m as ae,T as ie,A as oe}from"./util.mZ4O57g1.js";import{T as ue}from"./Player.H-5UQDhK.js";const ce=r=>({}),M=r=>({slot:"action"});function B(r){let t,s;return t=new oe({props:{href:r[6],round:r[2]==="artist",of:r[3]}}),{c(){p(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,l){d(t,e,l),s=!0},p(e,l){const n={};l&64&&(n.href=e[6]),l&4&&(n.round=e[2]==="artist"),l&8&&(n.of=e[3]),t.$set(n)},i(e){s||(c(t.$$.fragment,e),s=!0)},o(e){$(t.$$.fragment,e),s=!1},d(e){k(t,e)}}}function $e(r){let t=r[3]?.title+"",s;return{c(){s=z(t)},l(e){s=N(e,t)},m(e,l){m(e,s,l)},p(e,l){l&8&&t!==(t=e[3]?.title+"")&&q(s,t)},d(e){e&&_(s)}}}function me(r){let t,s;return t=new A({props:{secondary:!0,loading:!r[3],indent:r[2]==="playlist",$$slots:{default:[pe]},$$scope:{ctx:r}}}),{c(){p(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,l){d(t,e,l),s=!0},p(e,l){const n={};l&8&&(n.loading=!e[3]),l&4&&(n.indent=e[2]==="playlist"),l&32804&&(n.$$scope={dirty:l,ctx:e}),t.$set(n)},i(e){s||(c(t.$$.fragment,e),s=!0)},o(e){$(t.$$.fragment,e),s=!1},d(e){k(t,e)}}}function _e(r){let t,s,e,l,n,f;t=new A({props:{secondary:!0,indent:r[2]==="playlist",$$slots:{default:[ge]},$$scope:{ctx:r}}}),e=new A({props:{secondary:!0,indent:r[2]==="playlist",$$slots:{default:[de]},$$scope:{ctx:r}}});let i="remote"in r[3]&&r[3].remote&&E(r);return{c(){p(t.$$.fragment),s=T(),p(e.$$.fragment),l=T(),i&&i.c(),n=y()},l(a){g(t.$$.fragment,a),s=v(a),g(e.$$.fragment,a),l=v(a),i&&i.l(a),n=y()},m(a,o){d(t,a,o),m(a,s,o),d(e,a,o),m(a,l,o),i&&i.m(a,o),m(a,n,o),f=!0},p(a,o){const b={};o&4&&(b.indent=a[2]==="playlist"),o&32776&&(b.$$scope={dirty:o,ctx:a}),t.$set(b);const w={};o&4&&(w.indent=a[2]==="playlist"),o&32776&&(w.$$scope={dirty:o,ctx:a}),e.$set(w),"remote"in a[3]&&a[3].remote?i?(i.p(a,o),o&8&&c(i,1)):(i=E(a),i.c(),c(i,1),i.m(n.parentNode,n)):i&&(H(),$(i,1,1,()=>{i=null}),I())},i(a){f||(c(t.$$.fragment,a),c(e.$$.fragment,a),c(i),f=!0)},o(a){$(t.$$.fragment,a),$(e.$$.fragment,a),$(i),f=!1},d(a){a&&(_(s),_(l),_(n)),k(t,a),k(e,a),i&&i.d(a)}}}function D(r){let t,s;return t=new j({props:{name:"globe",sm:!0}}),{c(){p(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,l){d(t,e,l),s=!0},i(e){s||(c(t.$$.fragment,e),s=!0)},o(e){$(t.$$.fragment,e),s=!1},d(e){k(t,e)}}}function pe(r){let t,s,e,l=r[2]==="artist"&&D();return{c(){l&&l.c(),t=T(),s=z(r[5])},l(n){l&&l.l(n),t=v(n),s=N(n,r[5])},m(n,f){l&&l.m(n,f),m(n,t,f),m(n,s,f),e=!0},p(n,f){n[2]==="artist"?l?f&4&&c(l,1):(l=D(),l.c(),c(l,1),l.m(t.parentNode,t)):l&&(H(),$(l,1,1,()=>{l=null}),I()),(!e||f&32)&&q(s,n[5])},i(n){e||(c(l),e=!0)},o(n){$(l),e=!1},d(n){n&&(_(t),_(s)),l&&l.d(n)}}}function ge(r){let t,s,e=r[3].collection.size+"",l,n;return t=new j({props:{name:"note",sm:!0}}),{c(){p(t.$$.fragment),s=T(),l=z(e)},l(f){g(t.$$.fragment,f),s=v(f),l=N(f,e)},m(f,i){d(t,f,i),m(f,s,i),m(f,l,i),n=!0},p(f,i){(!n||i&8)&&e!==(e=f[3].collection.size+"")&&q(l,e)},i(f){n||(c(t.$$.fragment,f),n=!0)},o(f){$(t.$$.fragment,f),n=!1},d(f){f&&(_(s),_(l)),k(t,f)}}}function de(r){let t,s,e=L(r[3].collection.duration)+"",l,n;return t=new j({props:{name:"clock",sm:!0}}),{c(){p(t.$$.fragment),s=T(),l=z(e)},l(f){g(t.$$.fragment,f),s=v(f),l=N(f,e)},m(f,i){d(t,f,i),m(f,s,i),m(f,l,i),n=!0},p(f,i){(!n||i&8)&&e!==(e=L(f[3].collection.duration)+"")&&q(l,e)},i(f){n||(c(t.$$.fragment,f),n=!0)},o(f){$(t.$$.fragment,f),n=!1},d(f){f&&(_(s),_(l)),k(t,f)}}}function E(r){let t,s,e,l;return t=new se({}),e=new A({props:{secondary:!0,$$slots:{default:[ke]},$$scope:{ctx:r}}}),{c(){p(t.$$.fragment),s=T(),p(e.$$.fragment)},l(n){g(t.$$.fragment,n),s=v(n),g(e.$$.fragment,n)},m(n,f){d(t,n,f),m(n,s,f),d(e,n,f),l=!0},p(n,f){const i={};f&32776&&(i.$$scope={dirty:f,ctx:n}),e.$set(i)},i(n){l||(c(t.$$.fragment,n),c(e.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),$(e.$$.fragment,n),l=!1},d(n){n&&_(s),k(t,n),k(e,n)}}}function ke(r){let t,s,e=r[3].remote+"",l,n;return t=new j({props:{name:"share",sm:!0}}),{c(){p(t.$$.fragment),s=T(),l=z(e)},l(f){g(t.$$.fragment,f),s=v(f),l=N(f,e)},m(f,i){d(t,f,i),m(f,s,i),m(f,l,i),n=!0},p(f,i){(!n||i&8)&&e!==(e=f[3].remote+"")&&q(l,e)},i(f){n||(c(t.$$.fragment,f),n=!0)},o(f){$(t.$$.fragment,f),n=!1},d(f){f&&(_(s),_(l)),k(t,f)}}}function be(r){let t,s,e,l;const n=[_e,me],f=[];function i(a,o){return a[3]?.collection?0:1}return t=i(r),s=f[t]=n[t](r),{c(){s.c(),e=y()},l(a){s.l(a),e=y()},m(a,o){f[t].m(a,o),m(a,e,o),l=!0},p(a,o){let b=t;t=i(a),t===b?f[t].p(a,o):(H(),$(f[b],1,1,()=>{f[b]=null}),I(),s=f[t],s?s.p(a,o):(s=f[t]=n[t](a),s.c()),c(s,1),s.m(e.parentNode,e))},i(a){l||(c(s),l=!0)},o(a){$(s),l=!1},d(a){a&&_(e),f[t].d(a)}}}function we(r){let t,s,e,l;return t=new ne({props:{xl:r[2]==="playlist",indent:r[2]==="playlist",loading:!r[3],$$slots:{default:[$e]},$$scope:{ctx:r}}}),e=new h({props:{x:!0,class:"gap-4",$$slots:{default:[be]},$$scope:{ctx:r}}}),{c(){p(t.$$.fragment),s=T(),p(e.$$.fragment)},l(n){g(t.$$.fragment,n),s=v(n),g(e.$$.fragment,n)},m(n,f){d(t,n,f),m(n,s,f),d(e,n,f),l=!0},p(n,f){const i={};f&4&&(i.xl=n[2]==="playlist"),f&4&&(i.indent=n[2]==="playlist"),f&8&&(i.loading=!n[3]),f&32776&&(i.$$scope={dirty:f,ctx:n}),t.$set(i);const a={};f&32812&&(a.$$scope={dirty:f,ctx:n}),e.$set(a)},i(n){l||(c(t.$$.fragment,n),c(e.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),$(e.$$.fragment,n),l=!1},d(n){n&&_(s),k(t,n),k(e,n)}}}function Se(r){let t,s,e,l=r[2]!=="playlist"&&B(r);return s=new h({props:{class:"gap-2",$$slots:{default:[we]},$$scope:{ctx:r}}}),{c(){l&&l.c(),t=T(),p(s.$$.fragment)},l(n){l&&l.l(n),t=v(n),g(s.$$.fragment,n)},m(n,f){l&&l.m(n,f),m(n,t,f),d(s,n,f),e=!0},p(n,f){n[2]!=="playlist"?l?(l.p(n,f),f&4&&c(l,1)):(l=B(n),l.c(),c(l,1),l.m(t.parentNode,t)):l&&(H(),$(l,1,1,()=>{l=null}),I());const i={};f&32812&&(i.$$scope={dirty:f,ctx:n}),s.$set(i)},i(n){e||(c(l),c(s.$$.fragment,n),e=!0)},o(n){$(l),$(s.$$.fragment,n),e=!1},d(n){n&&_(t),l&&l.d(n),k(s,n)}}}function Te(r){let t,s;return t=new h({props:{x:!0,class:`place-items-center gap-4 ${r[2]!=="playlist"?"p-4":""}`,$$slots:{default:[Se]},$$scope:{ctx:r}}}),{c(){p(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,l){d(t,e,l),s=!0},p(e,l){const n={};l&4&&(n.class=`place-items-center gap-4 ${e[2]!=="playlist"?"p-4":""}`),l&32876&&(n.$$scope={dirty:l,ctx:e}),t.$set(n)},i(e){s||(c(t.$$.fragment,e),s=!0)},o(e){$(t.$$.fragment,e),s=!1},d(e){k(t,e)}}}function ve(r){let t;const s=r[9].default,e=F(s,r,r[15],null);return{c(){e&&e.c()},l(l){e&&e.l(l)},m(l,n){e&&e.m(l,n),t=!0},p(l,n){e&&e.p&&(!t||n&32768)&&G(e,s,l,l[15],t?O(s,l[15],n,null):J(l[15]),null)},i(l){t||(c(e,l),t=!0)},o(l){$(e,l),t=!1},d(l){e&&e.d(l)}}}function ze(r){let t;const s=r[9].action,e=F(s,r,r[15],M);return{c(){e&&e.c()},l(l){e&&e.l(l)},m(l,n){e&&e.m(l,n),t=!0},p(l,n){e&&e.p&&(!t||n&32768)&&G(e,s,l,l[15],t?O(s,l[15],n,ce):J(l[15]),M)},i(l){t||(c(e,l),t=!0)},o(l){$(e,l),t=!1},d(l){e&&e.d(l)}}}function Ne(r){let t,s,e,l,n;t=new ie({props:{title:r[3]?.title||"",$$slots:{default:[Te]},$$scope:{ctx:r}}});function f(a){r[10](a)}let i={fixed:r[1]||(r[2]==="playlist"?!!r[4]:!0),tracks:r[7],$$slots:{action:[ze],default:[ve]},$$scope:{ctx:r}};return r[0]!==void 0&&(i.selected=r[0]),e=new ue({props:i}),Z.push(()=>le(e,"selected",f)),e.$on("edit",r[11]),e.$on("click",r[12]),e.$on("action",r[13]),e.$on("end",r[14]),{c(){p(t.$$.fragment),s=T(),p(e.$$.fragment)},l(a){g(t.$$.fragment,a),s=v(a),g(e.$$.fragment,a)},m(a,o){d(t,a,o),m(a,s,o),d(e,a,o),n=!0},p(a,o){const b={};o&8&&(b.title=a[3]?.title||""),o&32876&&(b.$$scope={dirty:o,ctx:a}),t.$set(b);const w={};o&22&&(w.fixed=a[1]||(a[2]==="playlist"?!!a[4]:!0)),o&128&&(w.tracks=a[7]),o&32768&&(w.$$scope={dirty:o,ctx:a}),!l&&o&1&&(l=!0,w.selected=a[0],x(()=>l=!1)),e.$set(w)},i(a){n||(c(t.$$.fragment,a),c(e.$$.fragment,a),n=!0)},o(a){$(t.$$.fragment,a),$(e.$$.fragment,a),n=!1},d(a){a&&_(s),k(t,a),k(e,a)}}}function qe(r){let t,s;return t=new h({props:{class:r[2]==="playlist"?"gap-4":"",$$slots:{default:[Ne]},$$scope:{ctx:r}}}),{c(){p(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,l){d(t,e,l),s=!0},p(e,[l]){const n={};l&4&&(n.class=e[2]==="playlist"?"gap-4":""),l&33023&&(n.$$scope={dirty:l,ctx:e}),t.$set(n)},i(e){s||(c(t.$$.fragment,e),s=!0)},o(e){$(t.$$.fragment,e),s=!1},d(e){k(t,e)}}}function Ce(r,t,s){let e,l,n,f;Y(r,fe,u=>s(4,f=u));let{$$slots:i={},$$scope:a}=t,{fixed:o=!1}=t,{style:b}=t,{selected:w=new Set}=t,{of:S=void 0}=t,{tracks:K=void 0}=t;const P=u=>[...new Set(u)];function Q(u){w=u,s(0,w)}function R(u){C.call(this,r,u)}function U(u){C.call(this,r,u)}function V(u){C.call(this,r,u)}function W(u){C.call(this,r,u)}return r.$$set=u=>{"fixed"in u&&s(1,o=u.fixed),"style"in u&&s(2,b=u.style),"selected"in u&&s(0,w=u.selected),"of"in u&&s(3,S=u.of),"tracks"in u&&s(8,K=u.tracks),"$$scope"in u&&s(15,a=u.$$scope)},r.$$.update=()=>{r.$$.dirty&280&&s(7,e=(K||S?.collection?.tracks)?.filter(ae(f))),r.$$.dirty&12&&s(6,l=S?.collection&&b!=="playlist"?`/explore/${b}#${S?.id}`:void 0),r.$$.dirty&8&&s(5,n=S?P("artists"in S?S.artists.map(u=>u.title):"sources"in S?S?.sources.map(u=>re(u.split("/")[0])).filter(u=>!!u):[]).join(", "):"Loading")},[w,o,b,S,f,n,l,e,K,i,Q,R,U,V,W,a]}class Me extends ee{constructor(t){super(),te(this,t,Ce,qe,X,{fixed:1,style:2,selected:0,of:3,tracks:8})}}export{Me as C};

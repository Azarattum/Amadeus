import{s as N,w as P,f as w,l as Q,a as W,g as y,h as I,m as Y,d as m,c as Z,j as $,E as v,i as k,u as A,C as S,J as q,n as x,x as ee,y as te,z as le,T as ne,p as se,e as C,G as ie,X as ae,a1 as U,k as E,I as oe}from"./scheduler.c5d52407.js";import{S as O,i as X,a as g,t as p,g as F,c as K,b as j,d as z,m as B,e as D}from"./index.0fc8bad8.js";import{g as re,I as fe}from"./Spinner.svelte_svelte_type_style_lang.a6e64879.js";import{n as ue,I as M,e as V}from"./Track.045956c1.js";import"./paths.36287d71.js";function ce(a){let e,l,s,n,o,t,i,f,h;const b=a[6].default,u=P(b,a,a[5],null);return{c(){e=w("aside"),l=w("button"),s=w("h2"),n=Q(a[1]),o=W(),t=w("div"),u&&u.c(),this.h()},l(c){e=y(c,"ASIDE",{class:!0});var r=I(e);l=y(r,"BUTTON",{tabindex:!0,class:!0});var d=I(l);s=y(d,"H2",{});var _=I(s);n=Y(_,a[1]),_.forEach(m),d.forEach(m),r.forEach(m),o=Z(c),t=y(c,"DIV",{class:!0});var R=I(t);u&&u.l(R),R.forEach(m),this.h()},h(){$(l,"tabindex","-1"),$(l,"class","fixed z-50 flex h-11 w-full origin-top scale-y-0 transform-gpu touch-manipulation select-none items-center justify-center border-b border-highlight bg-gradient-to-t from-surface/70 to-surface font-semibold opacity-0 backdrop-blur-md transition-composite will-change-transform sm:bg-inherit svelte-awudgc"),v(l,"scale-y-100",a[0]),v(l,"opacity-100",a[0]),$(e,"class","absolute left-0 top-0"),$(t,"class","transition-composite"),v(t,"opacity-0",a[0])},m(c,r){k(c,e,r),A(e,l),A(l,s),A(s,n),k(c,o,r),k(c,t,r),u&&u.m(t,null),a[7](t),i=!0,f||(h=[S(l,"click",a[3]),q(ue.call(null,t,.8)),S(t,"intersect",a[4])],f=!0)},p(c,[r]){(!i||r&2)&&x(n,c[1]),(!i||r&1)&&v(l,"scale-y-100",c[0]),(!i||r&1)&&v(l,"opacity-100",c[0]),u&&u.p&&(!i||r&32)&&ee(u,b,c,c[5],i?le(b,c[5],r,null):te(c[5]),null),(!i||r&1)&&v(t,"opacity-0",c[0])},i(c){i||(g(u,c),i=!0)},o(c){p(u,c),i=!1},d(c){c&&(m(e),m(o),m(t)),u&&u.d(c),a[7](null),f=!1,ne(h)}}}function he(a,e,l){let{$$slots:s={},$$scope:n}=e,{stuck:o=!1}=e,{title:t=""}=e,i;const f=()=>i==null?void 0:i.scrollIntoView({behavior:"smooth"});function h({detail:u}){const c=u.boundingClientRect,r=u.rootBounds;if(c.x<u.intersectionRect.x-1)return;const d=((r==null?void 0:r.x)||0)+((r==null?void 0:r.width)||0);c.x+c.width-d>5||l(0,o=u.intersectionRatio<.8)}function b(u){se[u?"unshift":"push"](()=>{i=u,l(2,i)})}return a.$$set=u=>{"stuck"in u&&l(0,o=u.stuck),"title"in u&&l(1,t=u.title),"$$scope"in u&&l(5,n=u.$$scope)},[o,t,i,f,h,n,s,b]}class Ie extends O{constructor(e){super(),X(this,e,he,ce,N,{stuck:0,title:1})}}function G(a,e,l){const s=a.slice();return s[3]=e[l].album.arts,s[4]=e[l].album.thumbnails,s}function de(a){var s,n;let e,l;return e=new M({props:{size:L,src:a[0]?((s=a[0].arts)==null?void 0:s[0])||"":void 0,thumbnail:a[0]?((n=a[0].thumbnails)==null?void 0:n[0])||"":void 0,$$slots:{default:[_e]},$$scope:{ctx:a}}}),{c(){j(e.$$.fragment)},l(o){z(e.$$.fragment,o)},m(o,t){B(e,o,t),l=!0},p(o,t){var f,h;const i={};t&1&&(i.src=o[0]?((f=o[0].arts)==null?void 0:f[0])||"":void 0),t&1&&(i.thumbnail=o[0]?((h=o[0].thumbnails)==null?void 0:h[0])||"":void 0),t&129&&(i.$$scope={dirty:t,ctx:o}),e.$set(i)},i(o){l||(g(e.$$.fragment,o),l=!0)},o(o){p(e.$$.fragment,o),l=!1},d(o){D(e,o)}}}function me(a){let e,l,s=V(a[0].collection.tracks.filter(J).slice(0,4)),n=[];for(let t=0;t<s.length;t+=1)n[t]=H(G(a,s,t));const o=t=>p(n[t],1,1,()=>{n[t]=null});return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=C()},l(t){for(let i=0;i<n.length;i+=1)n[i].l(t);e=C()},m(t,i){for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,i);k(t,e,i),l=!0},p(t,i){if(i&1){s=V(t[0].collection.tracks.filter(J).slice(0,4));let f;for(f=0;f<s.length;f+=1){const h=G(t,s,f);n[f]?(n[f].p(h,i),g(n[f],1)):(n[f]=H(h),n[f].c(),g(n[f],1),n[f].m(e.parentNode,e))}for(F(),f=s.length;f<n.length;f+=1)o(f);K()}},i(t){if(!l){for(let i=0;i<s.length;i+=1)g(n[i]);l=!0}},o(t){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)p(n[i]);l=!1},d(t){t&&m(e),oe(n,t)}}}function _e(a){var o;let e,l,s=`hue-rotate(${((o=a[0])==null?void 0:o.id)||0}deg)`,n;return l=new fe({props:{name:a[0]&&"year"in a[0]?"disk":"person",xl:!0}}),{c(){e=w("div"),j(l.$$.fragment),this.h()},l(t){e=y(t,"DIV",{class:!0});var i=I(e);z(l.$$.fragment,i),i.forEach(m),this.h()},h(){$(e,"class","flex h-full w-full items-center justify-center bg-gradient-to-r from-rose-400 to-red-400 text-white"),E(e,"filter",s)},m(t,i){k(t,e,i),B(l,e,null),n=!0},p(t,i){var h;const f={};i&1&&(f.name=t[0]&&"year"in t[0]?"disk":"person"),l.$set(f),i&1&&s!==(s=`hue-rotate(${((h=t[0])==null?void 0:h.id)||0}deg)`)&&E(e,"filter",s)},i(t){n||(g(l.$$.fragment,t),n=!0)},o(t){p(l.$$.fragment,t),n=!1},d(t){t&&m(e),D(l)}}}function H(a){var s,n;let e,l;return e=new M({props:{src:((s=a[3])==null?void 0:s[0])||"",thumbnail:((n=a[4])==null?void 0:n[0])||""}}),{c(){j(e.$$.fragment)},l(o){z(e.$$.fragment,o)},m(o,t){B(e,o,t),l=!0},p(o,t){var f,h;const i={};t&1&&(i.src=((f=o[3])==null?void 0:f[0])||""),t&1&&(i.thumbnail=((h=o[4])==null?void 0:h[0])||""),e.$set(i)},i(o){l||(g(e.$$.fragment,o),l=!0)},o(o){p(e.$$.fragment,o),l=!1},d(o){D(e,o)}}}function T(a){let e,l,s,n,o=`${L}px`,t=`${L}px`,i;const f=[me,de],h=[];function b(r,d){var _;return(_=r[0])!=null&&_.collection&&!r[0].arts?0:1}l=b(a),s=h[l]=f[l](a);let u=[{href:a[2]},{class:n="grid shrink-0 grid-cols-2 gap-2 overflow-hidden shadow-lg contain-paint "+(a[1]?"rounded-full":"rounded-2xl")+" "+(a[2]?"outline outline-0 outline-highlight transition-[outline_transform] active:scale-95 hover:outline-8":"")}],c={};for(let r=0;r<u.length;r+=1)c=ae(c,u[r]);return{c(){e=w(a[2]?"a":"div"),s.c(),this.h()},l(r){e=y(r,((a[2]?"a":"div")||"null").toUpperCase(),{href:!0,class:!0});var d=I(e);s.l(d),d.forEach(m),this.h()},h(){U(a[2]?"a":"div")(e,c),v(e,"bg-highlight",Array.isArray(a[0])&&!a[0].length),E(e,"width",o),E(e,"height",t)},m(r,d){k(r,e,d),h[l].m(e,null),i=!0},p(r,d){let _=l;l=b(r),l===_?h[l].p(r,d):(F(),p(h[_],1,1,()=>{h[_]=null}),K(),s=h[l],s?s.p(r,d):(s=h[l]=f[l](r),s.c()),g(s,1),s.m(e,null)),U(r[2]?"a":"div")(e,c=re(u,[(!i||d&4)&&{href:r[2]},(!i||d&6&&n!==(n="grid shrink-0 grid-cols-2 gap-2 overflow-hidden shadow-lg contain-paint "+(r[1]?"rounded-full":"rounded-2xl")+" "+(r[2]?"outline outline-0 outline-highlight transition-[outline_transform] active:scale-95 hover:outline-8":"")))&&{class:n}])),v(e,"bg-highlight",Array.isArray(r[0])&&!r[0].length)},i(r){i||(g(s),i=!0)},o(r){p(s),i=!1},d(r){r&&m(e),h[l].d()}}}function ge(a){let e=a[2]?"a":"div",l,s=(a[2]?"a":"div")&&T(a);return{c(){s&&s.c(),l=C()},l(n){s&&s.l(n),l=C()},m(n,o){s&&s.m(n,o),k(n,l,o)},p(n,[o]){n[2],e?N(e,n[2]?"a":"div")?(s.d(1),s=T(n),e=n[2]?"a":"div",s.c(),s.m(l.parentNode,l)):s.p(n,o):(s=T(n),e=n[2]?"a":"div",s.c(),s.m(l.parentNode,l))},i:ie,o(n){p(s,n)},d(n){n&&m(l),s&&s.d(n)}}}const L=104,J=a=>{var e;return(e=a.album.arts)==null?void 0:e.length};function pe(a,e,l){let{of:s=void 0}=e,{round:n=!1}=e,{href:o=void 0}=e;return a.$$set=t=>{"of"in t&&l(0,s=t.of),"round"in t&&l(1,n=t.round),"href"in t&&l(2,o=t.href)},[s,n,o]}class $e extends O{constructor(e){super(),X(this,e,pe,ge,N,{of:0,round:1,href:2})}}function Ce(a){return a=a.toLowerCase(),e=>{var l,s,n,o;return a?e?!!((l=e.title)!=null&&l.toLowerCase().includes(a))||!!((s=e.artists)!=null&&s.find(t=>{var i;return(i=t.title)==null?void 0:i.toLowerCase().includes(a)}))||!!((o=(n=e.album)==null?void 0:n.title)!=null&&o.toLowerCase().includes(a)):!1:!0}}export{$e as A,Ie as T,Ce as m};

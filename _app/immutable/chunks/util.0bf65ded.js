import{s as S,w as J,f as w,l as K,a as Q,g as y,h as I,m as W,d as _,c as Y,j as $,E as v,i as k,u as C,C as Z,n as q,x,y as ee,z as te,o as le,p as ne,e as E,G as se,X as ie,a1 as V,k as A,I as ae}from"./scheduler.c5d52407.js";import{S as M,i as P,a as p,t as b,g as R,c as X,b as T,d as j,m as z,e as D}from"./index.0fc8bad8.js";import{a as oe,g as re,I as fe}from"./Spinner.svelte_svelte_type_style_lang.9e9001e5.js";import{I as F,e as B}from"./Track.8877e3f0.js";import"./paths.87873d95.js";function ue(a){let e,l,s,n,o,t,i,f,c;const h=a[5].default,d=J(h,a,a[4],null);return{c(){e=w("aside"),l=w("button"),s=w("h2"),n=K(a[1]),o=Q(),t=w("div"),d&&d.c(),this.h()},l(u){e=y(u,"ASIDE",{class:!0});var r=I(e);l=y(r,"BUTTON",{tabindex:!0,class:!0});var m=I(l);s=y(m,"H2",{});var g=I(s);n=W(g,a[1]),g.forEach(_),m.forEach(_),r.forEach(_),o=Y(u),t=y(u,"DIV",{class:!0});var U=I(t);d&&d.l(U),U.forEach(_),this.h()},h(){$(l,"tabindex","-1"),$(l,"class","fixed z-50 flex h-11 w-full origin-top scale-y-0 transform-gpu touch-manipulation select-none items-center justify-center border-b border-highlight bg-gradient-to-t from-surface/70 to-surface font-semibold opacity-0 backdrop-blur-md transition-composite will-change-transform sm:bg-inherit svelte-awudgc"),v(l,"scale-y-100",a[0]),v(l,"opacity-100",a[0]),$(e,"class","absolute left-0 top-0"),$(t,"class","transition-composite"),v(t,"opacity-0",a[0])},m(u,r){k(u,e,r),C(e,l),C(l,s),C(s,n),k(u,o,r),k(u,t,r),d&&d.m(t,null),a[6](t),i=!0,f||(c=Z(l,"click",a[3]),f=!0)},p(u,[r]){(!i||r&2)&&q(n,u[1]),(!i||r&1)&&v(l,"scale-y-100",u[0]),(!i||r&1)&&v(l,"opacity-100",u[0]),d&&d.p&&(!i||r&16)&&x(d,h,u,u[4],i?te(h,u[4],r,null):ee(u[4]),null),(!i||r&1)&&v(t,"opacity-0",u[0])},i(u){i||(p(d,u),i=!0)},o(u){b(d,u),i=!1},d(u){u&&(_(e),_(o),_(t)),d&&d.d(u),a[6](null),f=!1,c()}}}function ce(a,e,l){let{$$slots:s={},$$scope:n}=e,{stuck:o=!1}=e,{title:t=""}=e,i;const f=()=>i.scrollIntoView({behavior:"smooth"});le(()=>{const h=new IntersectionObserver(([d])=>l(0,o=d.intersectionRatio<.8),{root:oe(i),threshold:.8});return h.observe(i),()=>h.disconnect()});function c(h){ne[h?"unshift":"push"](()=>{i=h,l(2,i)})}return a.$$set=h=>{"stuck"in h&&l(0,o=h.stuck),"title"in h&&l(1,t=h.title),"$$scope"in h&&l(4,n=h.$$scope)},[o,t,i,f,n,s,c]}class ye extends M{constructor(e){super(),P(this,e,ce,ue,S,{stuck:0,title:1})}}function O(a,e,l){const s=a.slice();return s[3]=e[l].album.arts,s[4]=e[l].album.thumbnails,s}function he(a){var s,n;let e,l;return e=new F({props:{size:N,src:a[0]?((s=a[0].arts)==null?void 0:s[0])||"":void 0,thumbnail:a[0]?((n=a[0].thumbnails)==null?void 0:n[0])||"":void 0,$$slots:{default:[me]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,t){z(e,o,t),l=!0},p(o,t){var f,c;const i={};t&1&&(i.src=o[0]?((f=o[0].arts)==null?void 0:f[0])||"":void 0),t&1&&(i.thumbnail=o[0]?((c=o[0].thumbnails)==null?void 0:c[0])||"":void 0),t&129&&(i.$$scope={dirty:t,ctx:o}),e.$set(i)},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){b(e.$$.fragment,o),l=!1},d(o){D(e,o)}}}function de(a){let e,l,s=B(a[0].collection.tracks.filter(H).slice(0,4)),n=[];for(let t=0;t<s.length;t+=1)n[t]=G(O(a,s,t));const o=t=>b(n[t],1,1,()=>{n[t]=null});return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=E()},l(t){for(let i=0;i<n.length;i+=1)n[i].l(t);e=E()},m(t,i){for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,i);k(t,e,i),l=!0},p(t,i){if(i&1){s=B(t[0].collection.tracks.filter(H).slice(0,4));let f;for(f=0;f<s.length;f+=1){const c=O(t,s,f);n[f]?(n[f].p(c,i),p(n[f],1)):(n[f]=G(c),n[f].c(),p(n[f],1),n[f].m(e.parentNode,e))}for(R(),f=s.length;f<n.length;f+=1)o(f);X()}},i(t){if(!l){for(let i=0;i<s.length;i+=1)p(n[i]);l=!0}},o(t){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)b(n[i]);l=!1},d(t){t&&_(e),ae(n,t)}}}function me(a){var o;let e,l,s=`hue-rotate(${((o=a[0])==null?void 0:o.id)||0}deg)`,n;return l=new fe({props:{name:a[0]&&"year"in a[0]?"disk":"person",xl:!0}}),{c(){e=w("div"),T(l.$$.fragment),this.h()},l(t){e=y(t,"DIV",{class:!0});var i=I(e);j(l.$$.fragment,i),i.forEach(_),this.h()},h(){$(e,"class","flex h-full w-full items-center justify-center bg-gradient-to-r from-rose-400 to-red-400 text-white"),A(e,"filter",s)},m(t,i){k(t,e,i),z(l,e,null),n=!0},p(t,i){var c;const f={};i&1&&(f.name=t[0]&&"year"in t[0]?"disk":"person"),l.$set(f),i&1&&s!==(s=`hue-rotate(${((c=t[0])==null?void 0:c.id)||0}deg)`)&&A(e,"filter",s)},i(t){n||(p(l.$$.fragment,t),n=!0)},o(t){b(l.$$.fragment,t),n=!1},d(t){t&&_(e),D(l)}}}function G(a){var s,n;let e,l;return e=new F({props:{src:((s=a[3])==null?void 0:s[0])||"",thumbnail:((n=a[4])==null?void 0:n[0])||""}}),{c(){T(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,t){z(e,o,t),l=!0},p(o,t){var f,c;const i={};t&1&&(i.src=((f=o[3])==null?void 0:f[0])||""),t&1&&(i.thumbnail=((c=o[4])==null?void 0:c[0])||""),e.$set(i)},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){b(e.$$.fragment,o),l=!1},d(o){D(e,o)}}}function L(a){let e,l,s,n,o=`${N}px`,t=`${N}px`,i;const f=[de,he],c=[];function h(r,m){var g;return(g=r[0])!=null&&g.collection&&!r[0].arts?0:1}l=h(a),s=c[l]=f[l](a);let d=[{href:a[2]},{class:n="grid shrink-0 grid-cols-2 gap-2 overflow-hidden shadow-lg contain-paint "+(a[1]?"rounded-full":"rounded-2xl")+" "+(a[2]?"outline outline-0 outline-highlight transition-[outline_transform] active:scale-95 hover:outline-8":"")}],u={};for(let r=0;r<d.length;r+=1)u=ie(u,d[r]);return{c(){e=w(a[2]?"a":"div"),s.c(),this.h()},l(r){e=y(r,((a[2]?"a":"div")||"null").toUpperCase(),{href:!0,class:!0});var m=I(e);s.l(m),m.forEach(_),this.h()},h(){V(a[2]?"a":"div")(e,u),v(e,"bg-highlight",Array.isArray(a[0])&&!a[0].length),A(e,"width",o),A(e,"height",t)},m(r,m){k(r,e,m),c[l].m(e,null),i=!0},p(r,m){let g=l;l=h(r),l===g?c[l].p(r,m):(R(),b(c[g],1,1,()=>{c[g]=null}),X(),s=c[l],s?s.p(r,m):(s=c[l]=f[l](r),s.c()),p(s,1),s.m(e,null)),V(r[2]?"a":"div")(e,u=re(d,[(!i||m&4)&&{href:r[2]},(!i||m&6&&n!==(n="grid shrink-0 grid-cols-2 gap-2 overflow-hidden shadow-lg contain-paint "+(r[1]?"rounded-full":"rounded-2xl")+" "+(r[2]?"outline outline-0 outline-highlight transition-[outline_transform] active:scale-95 hover:outline-8":"")))&&{class:n}])),v(e,"bg-highlight",Array.isArray(r[0])&&!r[0].length)},i(r){i||(p(s),i=!0)},o(r){b(s),i=!1},d(r){r&&_(e),c[l].d()}}}function _e(a){let e=a[2]?"a":"div",l,s=(a[2]?"a":"div")&&L(a);return{c(){s&&s.c(),l=E()},l(n){s&&s.l(n),l=E()},m(n,o){s&&s.m(n,o),k(n,l,o)},p(n,[o]){n[2],e?S(e,n[2]?"a":"div")?(s.d(1),s=L(n),e=n[2]?"a":"div",s.c(),s.m(l.parentNode,l)):s.p(n,o):(s=L(n),e=n[2]?"a":"div",s.c(),s.m(l.parentNode,l))},i:se,o(n){b(s,n)},d(n){n&&_(l),s&&s.d(n)}}}const N=104,H=a=>{var e;return(e=a.album.arts)==null?void 0:e.length};function ge(a,e,l){let{of:s=void 0}=e,{round:n=!1}=e,{href:o=void 0}=e;return a.$$set=t=>{"of"in t&&l(0,s=t.of),"round"in t&&l(1,n=t.round),"href"in t&&l(2,o=t.href)},[s,n,o]}class Ie extends M{constructor(e){super(),P(this,e,ge,_e,S,{of:0,round:1,href:2})}}function $e(a){return a=a.toLowerCase(),e=>{var l,s,n,o;return a?e?!!((l=e.title)!=null&&l.toLowerCase().includes(a))||!!((s=e.artists)!=null&&s.find(t=>{var i;return(i=t.title)==null?void 0:i.toLowerCase().includes(a)}))||!!((o=(n=e.album)==null?void 0:n.title)!=null&&o.toLowerCase().includes(a)):!1:!0}}export{Ie as A,ye as T,$e as m};

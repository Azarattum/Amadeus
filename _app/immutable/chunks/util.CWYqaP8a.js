import{s as L,y as G,e as w,t as Q,a as W,c as y,b as I,d as X,f as _,g as Y,r as $,D as v,i as k,h as E,F as Z,j as q,z as x,A as ee,B as te,q as le,v as ne,C as A,n as se,I as ie,J as U,K as C,u as ae}from"./scheduler.DDeJziXz.js";import{S as J,i as K,t as p,b,g as M,e as P,c as N,a as S,m as T,d as z}from"./index.Ck-5ZlV-.js";import{a as re,g as oe,I as fe}from"./Spinner.svelte_svelte_type_style_lang.Df5Tmw8H.js";import{I as R,b as V}from"./Track.JPZt6Yd8.js";import"./entry.Dq0cEQhD.js";function ue(a){let e,l,s,n,r,t,i,f,c;const h=a[5].default,d=G(h,a,a[4],null);return{c(){e=w("aside"),l=w("button"),s=w("h2"),n=Q(a[1]),r=W(),t=w("div"),d&&d.c(),this.h()},l(u){e=y(u,"ASIDE",{class:!0});var o=I(e);l=y(o,"BUTTON",{tabindex:!0,class:!0});var m=I(l);s=y(m,"H2",{});var g=I(s);n=X(g,a[1]),g.forEach(_),m.forEach(_),o.forEach(_),r=Y(u),t=y(u,"DIV",{class:!0});var B=I(t);d&&d.l(B),B.forEach(_),this.h()},h(){$(l,"tabindex","-1"),$(l,"class","fixed z-50 flex h-11 w-full origin-top scale-y-0 transform-gpu touch-manipulation select-none items-center justify-center border-b border-highlight bg-gradient-to-t from-surface/70 to-surface font-semibold opacity-0 backdrop-blur-md transition-composite will-change-transform sm:bg-inherit svelte-1vqfn9j"),v(l,"scale-y-100",a[0]),v(l,"opacity-100",a[0]),$(e,"class","absolute left-0 top-0"),$(t,"class","transition-composite"),v(t,"opacity-0",a[0])},m(u,o){k(u,e,o),E(e,l),E(l,s),E(s,n),k(u,r,o),k(u,t,o),d&&d.m(t,null),a[6](t),i=!0,f||(c=Z(l,"click",a[3]),f=!0)},p(u,[o]){(!i||o&2)&&q(n,u[1]),(!i||o&1)&&v(l,"scale-y-100",u[0]),(!i||o&1)&&v(l,"opacity-100",u[0]),d&&d.p&&(!i||o&16)&&x(d,h,u,u[4],i?te(h,u[4],o,null):ee(u[4]),null),(!i||o&1)&&v(t,"opacity-0",u[0])},i(u){i||(p(d,u),i=!0)},o(u){b(d,u),i=!1},d(u){u&&(_(e),_(r),_(t)),d&&d.d(u),a[6](null),f=!1,c()}}}function ce(a,e,l){let{$$slots:s={},$$scope:n}=e,{stuck:r=!1}=e,{title:t=""}=e,i;const f=()=>i.scrollIntoView({behavior:"smooth"});le(()=>{const h=new IntersectionObserver(([d])=>l(0,r=d.intersectionRatio<.8),{root:re(i),threshold:.8});return h.observe(i),()=>h.disconnect()});function c(h){ne[h?"unshift":"push"](()=>{i=h,l(2,i)})}return a.$$set=h=>{"stuck"in h&&l(0,r=h.stuck),"title"in h&&l(1,t=h.title),"$$scope"in h&&l(4,n=h.$$scope)},[r,t,i,f,n,s,c]}class ye extends J{constructor(e){super(),K(this,e,ce,ue,L,{stuck:0,title:1})}}function O(a,e,l){const s=a.slice();return s[3]=e[l].album.arts,s[4]=e[l].album.thumbnails,s}function he(a){var s,n;let e,l;return e=new R({props:{size:D,src:a[0]?((s=a[0].arts)==null?void 0:s[0])||"":void 0,thumbnail:a[0]?((n=a[0].thumbnails)==null?void 0:n[0])||"":void 0,$$slots:{default:[me]},$$scope:{ctx:a}}}),{c(){N(e.$$.fragment)},l(r){S(e.$$.fragment,r)},m(r,t){T(e,r,t),l=!0},p(r,t){var f,c;const i={};t&1&&(i.src=r[0]?((f=r[0].arts)==null?void 0:f[0])||"":void 0),t&1&&(i.thumbnail=r[0]?((c=r[0].thumbnails)==null?void 0:c[0])||"":void 0),t&129&&(i.$$scope={dirty:t,ctx:r}),e.$set(i)},i(r){l||(p(e.$$.fragment,r),l=!0)},o(r){b(e.$$.fragment,r),l=!1},d(r){z(e,r)}}}function de(a){let e,l,s=V(a[0].collection.tracks.filter(H).slice(0,4)),n=[];for(let t=0;t<s.length;t+=1)n[t]=F(O(a,s,t));const r=t=>b(n[t],1,1,()=>{n[t]=null});return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=A()},l(t){for(let i=0;i<n.length;i+=1)n[i].l(t);e=A()},m(t,i){for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,i);k(t,e,i),l=!0},p(t,i){if(i&1){s=V(t[0].collection.tracks.filter(H).slice(0,4));let f;for(f=0;f<s.length;f+=1){const c=O(t,s,f);n[f]?(n[f].p(c,i),p(n[f],1)):(n[f]=F(c),n[f].c(),p(n[f],1),n[f].m(e.parentNode,e))}for(M(),f=s.length;f<n.length;f+=1)r(f);P()}},i(t){if(!l){for(let i=0;i<s.length;i+=1)p(n[i]);l=!0}},o(t){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)b(n[i]);l=!1},d(t){t&&_(e),ae(n,t)}}}function me(a){var r;let e,l,s=`hue-rotate(${((r=a[0])==null?void 0:r.id)||0}deg)`,n;return l=new fe({props:{name:a[0]&&"year"in a[0]?"disk":"person",xl:!0}}),{c(){e=w("div"),N(l.$$.fragment),this.h()},l(t){e=y(t,"DIV",{class:!0});var i=I(e);S(l.$$.fragment,i),i.forEach(_),this.h()},h(){$(e,"class","flex h-full w-full items-center justify-center bg-gradient-to-r from-rose-400 to-red-400 text-white"),C(e,"filter",s)},m(t,i){k(t,e,i),T(l,e,null),n=!0},p(t,i){var c;const f={};i&1&&(f.name=t[0]&&"year"in t[0]?"disk":"person"),l.$set(f),i&1&&s!==(s=`hue-rotate(${((c=t[0])==null?void 0:c.id)||0}deg)`)&&C(e,"filter",s)},i(t){n||(p(l.$$.fragment,t),n=!0)},o(t){b(l.$$.fragment,t),n=!1},d(t){t&&_(e),z(l)}}}function F(a){var s,n;let e,l;return e=new R({props:{src:((s=a[3])==null?void 0:s[0])||"",thumbnail:((n=a[4])==null?void 0:n[0])||""}}),{c(){N(e.$$.fragment)},l(r){S(e.$$.fragment,r)},m(r,t){T(e,r,t),l=!0},p(r,t){var f,c;const i={};t&1&&(i.src=((f=r[3])==null?void 0:f[0])||""),t&1&&(i.thumbnail=((c=r[4])==null?void 0:c[0])||""),e.$set(i)},i(r){l||(p(e.$$.fragment,r),l=!0)},o(r){b(e.$$.fragment,r),l=!1},d(r){z(e,r)}}}function j(a){let e,l,s,n,r=`${D}px`,t=`${D}px`,i;const f=[de,he],c=[];function h(o,m){var g;return(g=o[0])!=null&&g.collection&&!o[0].arts?0:1}l=h(a),s=c[l]=f[l](a);let d=[{href:a[2]},{class:n="grid shrink-0 grid-cols-2 gap-2 overflow-hidden shadow-lg contain-paint "+(a[1]?"rounded-full":"rounded-2xl")+" "+(a[2]?"outline outline-0 outline-highlight transition-[outline_transform] active:scale-95 hover:outline-8":"")}],u={};for(let o=0;o<d.length;o+=1)u=ie(u,d[o]);return{c(){e=w(a[2]?"a":"div"),s.c(),this.h()},l(o){e=y(o,((a[2]?"a":"div")||"null").toUpperCase(),{href:!0,class:!0});var m=I(e);s.l(m),m.forEach(_),this.h()},h(){U(a[2]?"a":"div")(e,u),v(e,"bg-highlight",Array.isArray(a[0])&&!a[0].length),C(e,"width",r),C(e,"height",t)},m(o,m){k(o,e,m),c[l].m(e,null),i=!0},p(o,m){let g=l;l=h(o),l===g?c[l].p(o,m):(M(),b(c[g],1,1,()=>{c[g]=null}),P(),s=c[l],s?s.p(o,m):(s=c[l]=f[l](o),s.c()),p(s,1),s.m(e,null)),U(o[2]?"a":"div")(e,u=oe(d,[(!i||m&4)&&{href:o[2]},(!i||m&6&&n!==(n="grid shrink-0 grid-cols-2 gap-2 overflow-hidden shadow-lg contain-paint "+(o[1]?"rounded-full":"rounded-2xl")+" "+(o[2]?"outline outline-0 outline-highlight transition-[outline_transform] active:scale-95 hover:outline-8":"")))&&{class:n}])),v(e,"bg-highlight",Array.isArray(o[0])&&!o[0].length)},i(o){i||(p(s),i=!0)},o(o){b(s),i=!1},d(o){o&&_(e),c[l].d()}}}function _e(a){let e=a[2]?"a":"div",l,s=(a[2]?"a":"div")&&j(a);return{c(){s&&s.c(),l=A()},l(n){s&&s.l(n),l=A()},m(n,r){s&&s.m(n,r),k(n,l,r)},p(n,[r]){n[2],e?L(e,n[2]?"a":"div")?(s.d(1),s=j(n),e=n[2]?"a":"div",s.c(),s.m(l.parentNode,l)):s.p(n,r):(s=j(n),e=n[2]?"a":"div",s.c(),s.m(l.parentNode,l))},i:se,o(n){b(s,n)},d(n){n&&_(l),s&&s.d(n)}}}const D=104,H=a=>{var e;return(e=a.album.arts)==null?void 0:e.length};function ge(a,e,l){let{of:s=void 0}=e,{round:n=!1}=e,{href:r=void 0}=e;return a.$$set=t=>{"of"in t&&l(0,s=t.of),"round"in t&&l(1,n=t.round),"href"in t&&l(2,r=t.href)},[s,n,r]}class Ie extends J{constructor(e){super(),K(this,e,ge,_e,L,{of:0,round:1,href:2})}}function $e(a){return a=a.toLowerCase(),e=>{var l,s,n,r;return a?e?!!((l=e.title)!=null&&l.toLowerCase().includes(a))||!!((s=e.artists)!=null&&s.find(t=>{var i;return(i=t.title)==null?void 0:i.toLowerCase().includes(a)}))||!!((r=(n=e.album)==null?void 0:n.title)!=null&&r.toLowerCase().includes(a)):!1:!0}}export{Ie as A,ye as T,$e as m};

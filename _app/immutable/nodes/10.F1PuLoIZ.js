import{s as B,v as I,a as q,g as v,l as z,f as w,i as E,w as P,k as b,m as j,n as S}from"../chunks/scheduler.CPjqGZYx.js";import{S as D,i as F,f as G,c as m,a as p,m as $,t as d,b as _,d as g}from"../chunks/index.7wDAvZi8.js";import{B as H,I as A}from"../chunks/Spinner.svelte_svelte_type_style_lang.D0lRYGBb.js";import"../chunks/entry.BrIM7aOI.js";import{p as J}from"../chunks/stores.BIvHgtPY.js";import{a as k,l as C,g as K}from"../chunks/Track.a7xTf0rx.js";import{C as L}from"../chunks/Collection.C4QZMYYZ.js";function M(o){let t,n;return t=new A({props:{name:"trash"}}),{c(){m(t.$$.fragment)},l(e){p(t.$$.fragment,e)},m(e,a){$(t,e,a),n=!0},p:S,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){g(t,e)}}}function N(o){let t,n;return t=new H({props:{air:!0,stretch:!0,$$slots:{default:[M]},$$scope:{ctx:o}}}),t.$on("click",o[3]),{c(){m(t.$$.fragment)},l(e){p(t.$$.fragment,e)},m(e,a){$(t,e,a),n=!0},p(e,a){const l={};a&256&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){g(t,e)}}}function O(o){let t,n;return t=new A({props:{name:"last",slot:"action"}}),{c(){m(t.$$.fragment)},l(e){p(t.$$.fragment,e)},m(e,a){$(t,e,a),n=!0},p:S,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){g(t,e)}}}function Q(o){let t,n,e,a,l;function f(r){o[6](r)}let c={of:o[0],style:"playlist",$$slots:{action:[O],default:[N]},$$scope:{ctx:o}};return o[1]!==void 0&&(c.selected=o[1]),t=new L({props:c}),I.push(()=>G(t,"selected",f)),t.$on("edit",o[2]),document.title=a=(o[0]?`${o[0].title} - `:"")+"Amadeus",{c(){m(t.$$.fragment),e=q()},l(r){p(t.$$.fragment,r),e=v(r),z("svelte-pttznx",document.head).forEach(w)},m(r,i){$(t,r,i),E(r,e,i),l=!0},p(r,[i]){const u={};i&1&&(u.of=r[0]),i&256&&(u.$$scope={dirty:i,ctx:r}),!n&&i&2&&(n=!0,u.selected=r[1],P(()=>n=!1)),t.$set(u),(!l||i&1)&&a!==(a=(r[0]?`${r[0].title} - `:"")+"Amadeus")&&(document.title=a)},i(r){l||(d(t.$$.fragment,r),l=!0)},o(r){_(t.$$.fragment,r),l=!1},d(r){r&&w(e),g(t,r)}}}function R(o,t,n){let e,a,l,f;b(o,k,s=>n(7,a=s)),b(o,J,s=>n(4,l=s)),b(o,K,s=>n(5,f=s));let c=new Set;function r({detail:{action:s,after:h,item:y}}){y.entry&&s==="rearrange"&&C.rearrange(y.entry,h==null?void 0:h.entry)}function i(){C.purge([...c].map(s=>s.entry).filter(s=>!!s)),c.clear(),n(1,c)}function u(s){c=s,n(1,c)}return o.$$.update=()=>{o.$$.dirty&48&&n(0,e=f.find(s=>s.id===+l.url.hash.slice(1))),o.$$.dirty&1&&j(k,a=e?[e.title,"disk"]:null,a)},[e,c,r,i,l,f,u]}class x extends D{constructor(t){super(),F(this,t,R,Q,B,{})}}export{x as component};

import{S,i as z,s as E,w as I,T as q,y as p,a as N,z as m,c as O,C as P,h as w,A as $,b as T,V,g as d,d as _,B as g,E as b,N as j,O as A}from"../chunks/index.84a1bd3e.js";import{B as v,I as B}from"../chunks/Spinner.svelte_svelte_type_style_lang.4c7447fd.js";import"../chunks/paths.e6cb63f4.js";import{p as D}from"../chunks/stores.b8e53b39.js";import{e as k,l as C,p as F}from"../chunks/Track.1a081857.js";import{C as G}from"../chunks/Collection.6f83e498.js";function H(o){let t,n;return t=new B({props:{name:"trash"}}),{c(){p(t.$$.fragment)},l(e){m(t.$$.fragment,e)},m(e,s){$(t,e,s),n=!0},p:A,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){g(t,e)}}}function J(o){let t,n;return t=new v({props:{air:!0,stretch:!0,$$slots:{default:[H]},$$scope:{ctx:o}}}),t.$on("click",o[3]),{c(){p(t.$$.fragment)},l(e){m(t.$$.fragment,e)},m(e,s){$(t,e,s),n=!0},p(e,s){const l={};s&256&&(l.$$scope={dirty:s,ctx:e}),t.$set(l)},i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){g(t,e)}}}function K(o){let t,n;return t=new B({props:{name:"last",slot:"action"}}),{c(){p(t.$$.fragment)},l(e){m(t.$$.fragment,e)},m(e,s){$(t,e,s),n=!0},p:A,i(e){n||(d(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){g(t,e)}}}function L(o){let t,n,e,s,l;function f(r){o[6](r)}let c={of:o[0],style:"playlist",$$slots:{action:[K],default:[J]},$$scope:{ctx:o}};return o[1]!==void 0&&(c.selected=o[1]),t=new G({props:c}),I.push(()=>q(t,"selected",f)),t.$on("edit",o[2]),document.title=s=(o[0]?`${o[0].title} - `:"")+"Amadeus",{c(){p(t.$$.fragment),e=N()},l(r){m(t.$$.fragment,r),e=O(r),P("svelte-pttznx",document.head).forEach(w)},m(r,i){$(t,r,i),T(r,e,i),l=!0},p(r,[i]){const u={};i&1&&(u.of=r[0]),i&256&&(u.$$scope={dirty:i,ctx:r}),!n&&i&2&&(n=!0,u.selected=r[1],V(()=>n=!1)),t.$set(u),(!l||i&1)&&s!==(s=(r[0]?`${r[0].title} - `:"")+"Amadeus")&&(document.title=s)},i(r){l||(d(t.$$.fragment,r),l=!0)},o(r){_(t.$$.fragment,r),l=!1},d(r){g(t,r),r&&w(e)}}}function M(o,t,n){let e,s,l,f;b(o,k,a=>n(7,s=a)),b(o,D,a=>n(4,l=a)),b(o,F,a=>n(5,f=a));let c=new Set;function r({detail:{action:a,after:h,item:y}}){y.entry&&a==="rearrange"&&C.rearrange(y.entry,h==null?void 0:h.entry)}function i(){C.purge([...c].map(a=>a.entry).filter(a=>!!a)),c.clear(),n(1,c)}function u(a){c=a,n(1,c)}return o.$$.update=()=>{o.$$.dirty&48&&n(0,e=f.find(a=>a.id===+l.url.hash.slice(1))),o.$$.dirty&1&&j(k,s=e?[e.title,"disk"]:null,s)},[e,c,r,i,l,f,u]}class Z extends S{constructor(t){super(),z(this,t,M,L,E,{})}}export{Z as component};
